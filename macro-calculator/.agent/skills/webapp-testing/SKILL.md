---
name: nutrition-testing
description: 專為「營養計算機」網站設計的測試規範。確保 TDEE、BMR 等數學公式計算準確，並防止使用者輸入錯誤導致崩潰。
---

# 營養計算機 - 自動化測試規範

這是一個涉及使用者健康的工具，數據的「準確性」是最高指導原則。我們不接受「差不多」的答案。

## 1. 測試優先級 (Priority)
當使用者要求修改或新增計算功能時，必須優先考慮：
1.  **核心邏輯測試 (Unit Tests)**: 確保 `calculator.js` 或相關計算函式的數學結果正確無誤。
2.  **邊界條件測試 (Edge Cases)**: 確保輸入極端數值不會壞掉。
3.  **防呆測試 (Validation)**: 確保輸入負數或文字時有正確的錯誤提示。

## 2. 必測情境 (Critical Test Cases)
任何與「熱量計算」相關的改動，都必須通過以下檢查：
* **標準案例**: 輸入一位 25 歲、175cm、70kg 的男性，計算結果必須與標準公式 (Mifflin-St Jeor) 吻合。
* **負數地獄**: 當輸入「體重 -50kg」或「身高 0cm」時，程式不能崩潰 (Crash)，必須回傳 Error 或 0。
* **空值測試**: 當使用者還沒輸入完就按「計算」，不能顯示 `NaN` (Not a Number)。

## 3. 測試工具偏好 (Tools)
* 如果專案中已經有 `Vitest` 或 `Jest`，優先使用它們來寫單元測試。
* 如果沒有測試框架，請使用簡單的 `console.assert` 腳本來驗證邏輯。

## 4. 錯誤處理 (Error Handling)
* 如果發現計算結果出現 `Infinity` (無限大) 或 `NaN`，這被視為 **Critical Bug**，必須優先修復。